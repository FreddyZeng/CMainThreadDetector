# CMainThreadDetector
##起
软件发布后，偶尔会有这样的反馈信息：“打开某个页面时卡了一会儿”、“在某种情况下，做某种操作时软件很卡”。  
但是，开发者拿起手机打开某个页面，试呀试呀试呀试，难以重现。。。  
这些问题，  
可能是在特定用户的特定环境下才会发生，  
可能需要极特殊的时机下才会出现，  
难以重现，难以发觉。大多数情况下只能去沿着代码逻辑细细推敲。  
于是，有了这个MainThreadDetector的需求。  
##承  
发生卡顿，原因大致可分为一下几种：  
* 抢锁：主线程需要访问 DB，而此时某个子线程往 DB 插入大量数据。通常抢锁的体验是偶尔卡一阵子，过会就恢复了。
* 主线程大量 IO：主线程为了方便直接写入大量数据，会导致界面卡顿。
* 主线程大量计算：算法不合理，导致主线程某个函数占用大量 CPU。
* 大量的 UI 绘制：复杂的 UI、图文混排等，带来大量的 UI 绘制。
